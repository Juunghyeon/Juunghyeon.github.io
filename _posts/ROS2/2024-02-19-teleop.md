---
layout: single
title: "[ROS2] teleop_twist_keyboard"
categories:
  - ROS2
tag:
  - ROS2
  - teleop

toc: true
toc_sticky: true
---

# Intro
`'teleop_twist_keyboard'`는 ROS 패키지 중 하나로, 키보드를 사용하여 로봇을 제어하는 데 사용된다. 이번에는 해당 패키지를 공부하고 나만의 제어 패키지를 직접 구현해보도록 하겠다.

## teleop_twist_keyboard 이란?

`'teleop_twist_keyboard는'` ROS 패키지 중 하나로, 키보드를 사용하여 로봇을 제어하는 데 사용된다. 이 패키지는 키보드로 입력된 명령을 통해 로봇을 움직이는 텔레오퍼레이션(teleoperation)을 가능하게 한다.

일반적으로 사용자는 터미널에서 teleop_twist_keyboard를 실행하고, 키보드를 사용하여 로봇을 전진, 후진, 회전 등의 동작을 수행할 수 있다. 이러한 입력은 키보드에서 받아들여진 명령을 ROS 메시지로 변환하고, 로봇 제어 노드에 전송하여 로봇을 움직이게 한다.

주요 기능은 다음과 같다:

1. 키보드 입력을 통해 로봇을 제어.
2. 명령을 로봇 제어 노드로 전송하여 로봇을 움직임.
3. 키보드 입력에 따라 로봇의 선속도(linear velocity)와 각속도(angular velocity)를 조절.
4. ROS의 시각화 도구를 통해 로봇의 현재 상태를 확인.

teleop_twist_keyboard는 간단하고 직관적인 방법으로 로봇을 제어할 수 있는 방법을 제공하며, ROS 개발 환경에서 로봇을 테스트하거나 디버깅하는 데 유용하다.

## teleop_twist_keyboard_cpp

Cpp과 관련하여 오픈소스는 다음과 같다.

<details>
    <summary>teleop_twist_keyboard.cpp</summary>
    <div class="colorscripter-code" style="color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#fafafa;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #e5e5e5"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div><div style="line-height:130%">44</div><div style="line-height:130%">45</div><div style="line-height:130%">46</div><div style="line-height:130%">47</div><div style="line-height:130%">48</div><div style="line-height:130%">49</div><div style="line-height:130%">50</div><div style="line-height:130%">51</div><div style="line-height:130%">52</div><div style="line-height:130%">53</div><div style="line-height:130%">54</div><div style="line-height:130%">55</div><div style="line-height:130%">56</div><div style="line-height:130%">57</div><div style="line-height:130%">58</div><div style="line-height:130%">59</div><div style="line-height:130%">60</div><div style="line-height:130%">61</div><div style="line-height:130%">62</div><div style="line-height:130%">63</div><div style="line-height:130%">64</div><div style="line-height:130%">65</div><div style="line-height:130%">66</div><div style="line-height:130%">67</div><div style="line-height:130%">68</div><div style="line-height:130%">69</div><div style="line-height:130%">70</div><div style="line-height:130%">71</div><div style="line-height:130%">72</div><div style="line-height:130%">73</div><div style="line-height:130%">74</div><div style="line-height:130%">75</div><div style="line-height:130%">76</div><div style="line-height:130%">77</div><div style="line-height:130%">78</div><div style="line-height:130%">79</div><div style="line-height:130%">80</div><div style="line-height:130%">81</div><div style="line-height:130%">82</div><div style="line-height:130%">83</div><div style="line-height:130%">84</div><div style="line-height:130%">85</div><div style="line-height:130%">86</div><div style="line-height:130%">87</div><div style="line-height:130%">88</div><div style="line-height:130%">89</div><div style="line-height:130%">90</div><div style="line-height:130%">91</div><div style="line-height:130%">92</div><div style="line-height:130%">93</div><div style="line-height:130%">94</div><div style="line-height:130%">95</div><div style="line-height:130%">96</div><div style="line-height:130%">97</div><div style="line-height:130%">98</div><div style="line-height:130%">99</div><div style="line-height:130%">100</div><div style="line-height:130%">101</div><div style="line-height:130%">102</div><div style="line-height:130%">103</div><div style="line-height:130%">104</div><div style="line-height:130%">105</div><div style="line-height:130%">106</div><div style="line-height:130%">107</div><div style="line-height:130%">108</div><div style="line-height:130%">109</div><div style="line-height:130%">110</div><div style="line-height:130%">111</div><div style="line-height:130%">112</div><div style="line-height:130%">113</div><div style="line-height:130%">114</div><div style="line-height:130%">115</div><div style="line-height:130%">116</div><div style="line-height:130%">117</div><div style="line-height:130%">118</div><div style="line-height:130%">119</div><div style="line-height:130%">120</div><div style="line-height:130%">121</div><div style="line-height:130%">122</div><div style="line-height:130%">123</div><div style="line-height:130%">124</div><div style="line-height:130%">125</div><div style="line-height:130%">126</div><div style="line-height:130%">127</div><div style="line-height:130%">128</div><div style="line-height:130%">129</div><div style="line-height:130%">130</div><div style="line-height:130%">131</div><div style="line-height:130%">132</div><div style="line-height:130%">133</div><div style="line-height:130%">134</div><div style="line-height:130%">135</div><div style="line-height:130%">136</div><div style="line-height:130%">137</div><div style="line-height:130%">138</div><div style="line-height:130%">139</div><div style="line-height:130%">140</div><div style="line-height:130%">141</div><div style="line-height:130%">142</div><div style="line-height:130%">143</div><div style="line-height:130%">144</div><div style="line-height:130%">145</div><div style="line-height:130%">146</div><div style="line-height:130%">147</div><div style="line-height:130%">148</div><div style="line-height:130%">149</div><div style="line-height:130%">150</div><div style="line-height:130%">151</div><div style="line-height:130%">152</div><div style="line-height:130%">153</div><div style="line-height:130%">154</div><div style="line-height:130%">155</div><div style="line-height:130%">156</div><div style="line-height:130%">157</div><div style="line-height:130%">158</div><div style="line-height:130%">159</div><div style="line-height:130%">160</div><div style="line-height:130%">161</div><div style="line-height:130%">162</div><div style="line-height:130%">163</div><div style="line-height:130%">164</div><div style="line-height:130%">165</div><div style="line-height:130%">166</div><div style="line-height:130%">167</div><div style="line-height:130%">168</div><div style="line-height:130%">169</div><div style="line-height:130%">170</div><div style="line-height:130%">171</div><div style="line-height:130%">172</div><div style="line-height:130%">173</div><div style="line-height:130%">174</div><div style="line-height:130%">175</div><div style="line-height:130%">176</div><div style="line-height:130%">177</div><div style="line-height:130%">178</div><div style="line-height:130%">179</div><div style="line-height:130%">180</div><div style="line-height:130%">181</div><div style="line-height:130%">182</div><div style="line-height:130%">183</div><div style="line-height:130%">184</div><div style="line-height:130%">185</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">&lt;</span>ros<span style="color:#039C43"></span><span style="color:#ff3399">/</span>ros.h<span style="color:#039C43"></span><span style="color:#ff3399">&gt;</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">&lt;</span>geometry_msgs<span style="color:#039C43"></span><span style="color:#ff3399">/</span>Twist.h<span style="color:#039C43"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">&lt;</span>stdio.h<span style="color:#039C43"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">&lt;</span>unistd.h<span style="color:#039C43"></span><span style="color:#ff3399">&gt;</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">&lt;</span>termios.h<span style="color:#039C43"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">&lt;</span>map<span style="color:#039C43"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;Map&nbsp;for&nbsp;movement&nbsp;keys</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0099cc">std</span>::map<span style="color:#039C43"></span><span style="color:#ff3399">&lt;</span><span style="color:#0099cc">char</span>,&nbsp;<span style="color:#0099cc">std</span>::<span style="color:#0099cc">vector</span><span style="color:#ff3399">&lt;</span><span style="color:#0099cc">float</span><span style="color:#ff3399">&gt;</span><span style="color:#039C43"></span><span style="color:#ff3399">&gt;</span>&nbsp;moveBindings</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'i'</span>,&nbsp;{<span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>}},</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'o'</span>,&nbsp;{<span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">-</span><span style="color:#308ce5">1</span>}},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'j'</span>,&nbsp;{<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">1</span>}},</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'l'</span>,&nbsp;{<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">-</span><span style="color:#308ce5">1</span>}},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'u'</span>,&nbsp;{<span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">1</span>}},</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">','</span>,&nbsp;{<span style="color:#039C43"></span><span style="color:#ff3399">-</span><span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>}},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'.'</span>,&nbsp;{<span style="color:#039C43"></span><span style="color:#ff3399">-</span><span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">1</span>}},</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'m'</span>,&nbsp;{<span style="color:#039C43"></span><span style="color:#ff3399">-</span><span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">-</span><span style="color:#308ce5">1</span>}},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'O'</span>,&nbsp;{<span style="color:#308ce5">1</span>,&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">-</span><span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>}},</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'I'</span>,&nbsp;{<span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>}},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'J'</span>,&nbsp;{<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>}},</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'L'</span>,&nbsp;{<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">-</span><span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>}},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'U'</span>,&nbsp;{<span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>}},</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'&lt;'</span>,&nbsp;{<span style="color:#039C43"></span><span style="color:#ff3399">-</span><span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>}},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'&gt;'</span>,&nbsp;{<span style="color:#039C43"></span><span style="color:#ff3399">-</span><span style="color:#308ce5">1</span>,&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">-</span><span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>}},</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'M'</span>,&nbsp;{<span style="color:#039C43"></span><span style="color:#ff3399">-</span><span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>}},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'t'</span>,&nbsp;{<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>}},</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'b'</span>,&nbsp;{<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">-</span><span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0</span>}},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'k'</span>,&nbsp;{<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>}},</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'K'</span>,&nbsp;{<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>,&nbsp;<span style="color:#308ce5">0</span>}}</div><div style="padding:0 6px; white-space:pre; line-height:130%">};</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;Map&nbsp;for&nbsp;speed&nbsp;keys</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0099cc">std</span>::map<span style="color:#039C43"></span><span style="color:#ff3399">&lt;</span><span style="color:#0099cc">char</span>,&nbsp;<span style="color:#0099cc">std</span>::<span style="color:#0099cc">vector</span><span style="color:#ff3399">&lt;</span><span style="color:#0099cc">float</span><span style="color:#ff3399">&gt;</span><span style="color:#039C43"></span><span style="color:#ff3399">&gt;</span>&nbsp;speedBindings</div><div style="padding:0 6px; white-space:pre; line-height:130%">{</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'q'</span>,&nbsp;{<span style="color:#308ce5">1.</span><span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">1.</span><span style="color:#308ce5">1</span>}},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'z'</span>,&nbsp;{<span style="color:#308ce5">0.</span><span style="color:#308ce5">9</span>,&nbsp;<span style="color:#308ce5">0.</span><span style="color:#308ce5">9</span>}},</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'w'</span>,&nbsp;{<span style="color:#308ce5">1.</span><span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">1</span>}},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'x'</span>,&nbsp;{<span style="color:#308ce5">0.</span><span style="color:#308ce5">9</span>,&nbsp;<span style="color:#308ce5">1</span>}},</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'e'</span>,&nbsp;{<span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">1.</span><span style="color:#308ce5">1</span>}},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{<span style="color:#993333">'c'</span>,&nbsp;{<span style="color:#308ce5">1</span>,&nbsp;<span style="color:#308ce5">0.</span><span style="color:#308ce5">9</span>}}</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">};</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;Reminder&nbsp;message</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">const</span>&nbsp;<span style="color:#0099cc">char</span><span style="color:#ff3399">*</span>&nbsp;msg&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;R<span style="color:#993333">"(</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">Reading&nbsp;from&nbsp;the&nbsp;keyboard&nbsp;and&nbsp;Publishing&nbsp;to&nbsp;Twist!</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">---------------------------</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">Moving&nbsp;around:</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">&nbsp;&nbsp;&nbsp;u&nbsp;&nbsp;&nbsp;&nbsp;i&nbsp;&nbsp;&nbsp;&nbsp;o</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">&nbsp;&nbsp;&nbsp;j&nbsp;&nbsp;&nbsp;&nbsp;k&nbsp;&nbsp;&nbsp;&nbsp;l</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">&nbsp;&nbsp;&nbsp;m&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333"></span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">For&nbsp;Holonomic&nbsp;mode&nbsp;(strafing),&nbsp;hold&nbsp;down&nbsp;the&nbsp;shift&nbsp;key:</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">---------------------------</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;&nbsp;&nbsp;&nbsp;O</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">&nbsp;&nbsp;&nbsp;J&nbsp;&nbsp;&nbsp;&nbsp;K&nbsp;&nbsp;&nbsp;&nbsp;L</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">&nbsp;&nbsp;&nbsp;M&nbsp;&nbsp;&nbsp;&nbsp;&lt;&nbsp;&nbsp;&nbsp;&nbsp;&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333"></span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">t&nbsp;:&nbsp;up&nbsp;(+z)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">b&nbsp;:&nbsp;down&nbsp;(-z)</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">anything&nbsp;else&nbsp;:&nbsp;stop</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">q/z&nbsp;:&nbsp;increase/decrease&nbsp;max&nbsp;speeds&nbsp;by&nbsp;10%</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">w/x&nbsp;:&nbsp;increase/decrease&nbsp;only&nbsp;linear&nbsp;speed&nbsp;by&nbsp;10%</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">e/c&nbsp;:&nbsp;increase/decrease&nbsp;only&nbsp;angular&nbsp;speed&nbsp;by&nbsp;10%</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">CTRL-C&nbsp;to&nbsp;quit</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333"></span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#993333">)"</span>;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;Init&nbsp;variables</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0099cc">float</span>&nbsp;speed(<span style="color:#308ce5">0.</span><span style="color:#308ce5">5</span>);&nbsp;<span style="color:#999999">//&nbsp;Linear&nbsp;velocity&nbsp;(m/s)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0099cc">float</span>&nbsp;turn(<span style="color:#308ce5">1.</span><span style="color:#308ce5">0</span>);&nbsp;<span style="color:#999999">//&nbsp;Angular&nbsp;velocity&nbsp;(rad/s)</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0099cc">float</span>&nbsp;x(<span style="color:#308ce5">0</span>),&nbsp;y(<span style="color:#308ce5">0</span>),&nbsp;z(<span style="color:#308ce5">0</span>),&nbsp;th(<span style="color:#308ce5">0</span>);&nbsp;<span style="color:#999999">//&nbsp;Forward/backward/neutral&nbsp;direction&nbsp;vars</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0099cc">char</span>&nbsp;key(<span style="color:#993333">'&nbsp;'</span>);</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;For&nbsp;non-blocking&nbsp;keyboard&nbsp;inputs</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0099cc">int</span>&nbsp;getch(<span style="color:#ff3399">void</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">{</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#0099cc">int</span>&nbsp;ch;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">struct</span>&nbsp;termios&nbsp;oldt;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">struct</span>&nbsp;termios&nbsp;newt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Store&nbsp;old&nbsp;settings,&nbsp;and&nbsp;copy&nbsp;to&nbsp;new&nbsp;settings</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;tcgetattr(STDIN_FILENO,&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">&amp;</span>oldt);</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;newt&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;oldt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Make&nbsp;required&nbsp;changes&nbsp;and&nbsp;apply&nbsp;the&nbsp;settings</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;newt.c_lflag&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">&amp;</span><span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;~(ICANON&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">|</span>&nbsp;ECHO);</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;newt.c_iflag&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">|</span><span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;IGNBRK;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;newt.c_iflag&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">&amp;</span><span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;~(INLCR&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">|</span>&nbsp;ICRNL&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">|</span>&nbsp;IXON&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">|</span>&nbsp;IXOFF);</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;newt.c_lflag&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">&amp;</span><span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;~(ICANON&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">|</span>&nbsp;ECHO&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">|</span>&nbsp;ECHOK&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">|</span>&nbsp;ECHOE&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">|</span>&nbsp;ECHONL&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">|</span>&nbsp;ISIG&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">|</span>&nbsp;IEXTEN);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;newt.c_cc[VMIN]&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#308ce5">1</span>;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;newt.c_cc[VTIME]&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#308ce5">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;tcsetattr(fileno(stdin),&nbsp;TCSANOW,&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">&amp;</span>newt);</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Get&nbsp;the&nbsp;current&nbsp;character</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;ch&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;getchar();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Reapply&nbsp;old&nbsp;settings</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;tcsetattr(STDIN_FILENO,&nbsp;TCSANOW,&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">&amp;</span>oldt);</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;ch;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0099cc">int</span>&nbsp;main(<span style="color:#0099cc">int</span>&nbsp;argc,&nbsp;<span style="color:#0099cc">char</span><span style="color:#ff3399">*</span><span style="color:#039C43"></span><span style="color:#ff3399">*</span>&nbsp;argv)</div><div style="padding:0 6px; white-space:pre; line-height:130%">{</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Init&nbsp;ROS&nbsp;node</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;ros::init(argc,&nbsp;argv,&nbsp;<span style="color:#993333">"teleop_twist_keyboard"</span>);</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;ros::NodeHandle&nbsp;nh;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Init&nbsp;cmd_vel&nbsp;publisher</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;ros::Publisher&nbsp;pub&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;nh.advertise<span style="color:#039C43"></span><span style="color:#ff3399">&lt;</span>geometry_msgs::Twist<span style="color:#039C43"></span><span style="color:#ff3399">&gt;</span>(<span style="color:#993333">"cmd_vel"</span>,&nbsp;<span style="color:#308ce5">1</span>);</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Create&nbsp;Twist&nbsp;message</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;geometry_msgs::Twist&nbsp;twist;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#0099cc">printf</span>(<span style="color:#993333">"%s"</span>,&nbsp;msg);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#0099cc">printf</span>(<span style="color:#993333">"\rCurrent:&nbsp;speed&nbsp;%f\tturn&nbsp;%f&nbsp;|&nbsp;Awaiting&nbsp;command...\r"</span>,&nbsp;speed,&nbsp;turn);</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">while</span>(<span style="color:#ff3399">true</span>){</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Get&nbsp;the&nbsp;pressed&nbsp;key</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;getch();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;If&nbsp;the&nbsp;key&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;key&nbsp;in&nbsp;moveBindings</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(moveBindings.count(key)&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span><span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#308ce5">1</span>)</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Grab&nbsp;the&nbsp;direction&nbsp;data</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;moveBindings[key][<span style="color:#308ce5">0</span>];</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;moveBindings[key][<span style="color:#308ce5">1</span>];</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;moveBindings[key][<span style="color:#308ce5">2</span>];</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;moveBindings[key][<span style="color:#308ce5">3</span>];</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0099cc">printf</span>(<span style="color:#993333">"\rCurrent:&nbsp;speed&nbsp;%f\tturn&nbsp;%f&nbsp;|&nbsp;Last&nbsp;command:&nbsp;%c&nbsp;&nbsp;&nbsp;"</span>,&nbsp;speed,&nbsp;turn,&nbsp;key);</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Otherwise&nbsp;if&nbsp;it&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;key&nbsp;in&nbsp;speedBindings</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">else</span>&nbsp;<span style="color:#ff3399">if</span>&nbsp;(speedBindings.count(key)&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span><span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#308ce5">1</span>)</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Grab&nbsp;the&nbsp;speed&nbsp;data</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;speed&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;speed&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">*</span>&nbsp;speedBindings[key][<span style="color:#308ce5">0</span>];</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;turn&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;turn&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">*</span>&nbsp;speedBindings[key][<span style="color:#308ce5">1</span>];</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0099cc">printf</span>(<span style="color:#993333">"\rCurrent:&nbsp;speed&nbsp;%f\tturn&nbsp;%f&nbsp;|&nbsp;Last&nbsp;command:&nbsp;%c&nbsp;&nbsp;&nbsp;"</span>,&nbsp;speed,&nbsp;turn,&nbsp;key);</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Otherwise,&nbsp;set&nbsp;the&nbsp;robot&nbsp;to&nbsp;stop</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">else</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#308ce5">0</span>;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#308ce5">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#308ce5">0</span>;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#308ce5">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;If&nbsp;ctrl-C&nbsp;(^C)&nbsp;was&nbsp;pressed,&nbsp;terminate&nbsp;the&nbsp;program</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(key&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span><span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#993333">'\x03'</span>)</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0099cc">printf</span>(<span style="color:#993333">"\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;|\\-^-/|&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/|&nbsp;}&nbsp;O.=.O&nbsp;{&nbsp;|\\\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CH3EERS\n\n"</span>);</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">break</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0099cc">printf</span>(<span style="color:#993333">"\rCurrent:&nbsp;speed&nbsp;%f\tturn&nbsp;%f&nbsp;|&nbsp;Invalid&nbsp;command!&nbsp;%c"</span>,&nbsp;speed,&nbsp;turn,&nbsp;key);</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Update&nbsp;the&nbsp;Twist&nbsp;message</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;twist.linear.x&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;x&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">*</span>&nbsp;speed;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;twist.linear.y&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;y&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">*</span>&nbsp;speed;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;twist.linear.z&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;z&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">*</span>&nbsp;speed;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;twist.angular.x&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#308ce5">0</span>;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;twist.angular.y&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#308ce5">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;twist.angular.z&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">=</span>&nbsp;th&nbsp;<span style="color:#039C43"></span><span style="color:#ff3399">*</span>&nbsp;turn;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Publish&nbsp;it&nbsp;and&nbsp;resolve&nbsp;any&nbsp;remaining&nbsp;callbacks</span></div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;pub.publish(twist);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;ros::spinOnce();</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;<span style="color:#308ce5">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#e5e5e5text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#e5e5e5;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>
</details>



## Reference

- <https://github.com/methylDragon/teleop_twist_keyboard_cpp/tree/master>